# Based upon the PKGBUILD from Arch Linux
pkgname=gegl
pkgver=0.2.0
pkgrel=1
pkgdesc="Graph based image processing framework"
arch=('x86_64')
url="http://www.gegl.org/"
license=('GPL3' 'LGPL3')
depends=('babl' 'libpng' 'libjpeg' 'gtk2' 'librsvg')
options=('!libtool')
source=(ftp://ftp.gimp.org/pub/${pkgname}/${pkgver%.*}/${pkgname}-${pkgver}.tar.bz2)
sha1sums=('764cc66cb3c7b261b8fc18a6268a0e264a91d573')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr \
              --build=${CBUILD} \
              --host=${CHOST} \
              --disable-profile \
              --disable-nls \
              --without-libspiro \
              --disable-docs \
              --disable-workshop \
              --without-exiv2 \
              --without-lua \
              --with-gtk \
              --with-pango \
              --with-gdk-pixbuf \
              --with-gio \
              --enable-sse \
              --enable-mmx \
              --with-cairo \
              --with-pangocairo \
              --without-libv4l \
              --without-sdl \
              --without-libopenraw \
              --with-libpng \
              --with-libjpeg \
              --without-openexr \
              --with-librsvg \
              --without-libavformat \
              --without-jasper
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
