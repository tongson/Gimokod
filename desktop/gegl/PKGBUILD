# Based upon the PKGBUILD from Arch Linux
pkgname=gegl
pkgver=0.1.6
pkgrel=1
pkgdesc="Graph based image processing framework"
arch=('i686' 'x86_64')
url="http://www.gegl.org/"
license=('GPL3' 'LGPL3')
depends=('babl' 'libpng' 'libjpeg' 'gtk2' 'librsvg')
options=('!libtool')
source=(ftp://ftp.gimp.org/pub/${pkgname}/${pkgver%.*}/${pkgname}-${pkgver}.tar.bz2
        0.1.6-ffmpeg.patch)
sha1sums=('27bedcfd077da7a6913b82966dbec904b22c121d'
          'd62d4987f1c0fc256f5968271fc65cce0cc4c195')


build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  Patch 0.1.6-ffmpeg.patch
  ./configure --prefix=/usr \
              --build=${CBUILD} \
              --host=${CHOST} \
              --disable-profile \
              --without-libspiro \
              --disable-docs \
              --disable-workshop \
              --without-exiv2 \
              --without-lua \
              --with-gtk \
              --with-pango \
              --with-gdk-pixbuf \
              --with-gio \
              --enable-sse \
              --enable-mmx \
              --with-cairo \
              --with-pangocairo \
              --without-libv4l \
              --without-sdl \
              --without-libopenraw \
              --with-libpng \
              --with-libjpeg \
              --without-openexr \
              --with-librsvg \
              --without-libavformat \
              --without-jasper
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
