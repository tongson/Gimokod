# Based upon the PKGBUILD from Arch Linux
pkgname=file
pkgver=5.10
pkgrel=1
pkgdesc="File type identification utility"
arch=('i686' 'x86_64')
license=('custom')
url="http://www.darwinsys.com/file/"
depends=('zlib')
groups=('base-devel')
options=('!libtool')
source=(ftp://ftp.astron.com/pub/${pkgname}/${pkgname}-${pkgver}.tar.gz)
sha256sums=('73ae51889006b1ddb95db729237d411eb8d353884dfb149f0b4427d314aff68a')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  sed -i 's#\$(datadir)/misc#\$(datadir)#' configure
  ./configure --prefix=/usr \
              --build=${CBUILD} \
              --host=${CHOST} \
              --datadir=/usr/share/file
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
  install -dm755 "${pkgdir}"/usr/share/misc
  ln -s ../file/magic.mgc "${pkgdir}"/usr/share/misc
  install -D -m644 COPYING "${pkgdir}"/usr/share/licenses/"${pkgname}"/COPYING
}
