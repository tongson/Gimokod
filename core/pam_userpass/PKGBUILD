pkgname=pam_userpass
pkgver=1.0.2
pkgrel=1
pkgdesc="PAM module for USER/PASS-style protocols"
arch=('i686' 'x86_64')
url="http://www.openwall.com/pam/"
license=('BSD')
groups=('base')
depends=('pam')
build() {
  cd "$srcdir/$pkgname-$pkgver"
  CFLAGS="${CFLAGS} -Iinclude -fPIC"
  LDFLAGS="${LDFLAGS} -s"
  make CFLAGS="${CFLAGS}" LDFLAGS="${LDFLAGS}" SECUREDIR=/usr/lib/security
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  make install SECUREDIR=/usr/lib/security DESTDIR="${pkgdir}"
  install -Dm644 "${srcdir}/LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}

source=(ftp://ftp.openwall.com/pub/projects/pam/modules/${pkgname}/${pkgname}-${pkgver}.tar.gz{,.sign}
        LICENSE)

sha256sums=('aad0667bff13fd84dfe71859ef41aec60e19d86e41a83cd718fdc2113f08f235'
            'fe8e9d0fe1704786aea9fcaac9901aa0bd84be423fe234826ef1ddec0dc9d222'
            '968a3db1f63d166bd82b5c44a2c6c4a2e2069fa418483586f17ef3f848b9ef04')
