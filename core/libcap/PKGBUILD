# Based upon the PKGBUILD from Arch Linux
pkgname=libcap
pkgver=2.22
pkgrel=1
pkgdesc="POSIX 1003.1e capabilities"
arch=('i686' 'x86_64')
url="http://sites.google.com/site/fullycapable/"
license=('GPL2')
groups=('base')
depends=('attr')
source=(http://www.kernel.org/pub/linux/libs/security/linux-privs/libcap2/${pkgname}-${pkgver}.tar.gz)
md5sums=('b4896816b626bea445f0b3849bdd4077')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  export BUILD_CC=/usr/bin/gcc
  export CC=/usr/bin/gcc
  export AR=/usr/bin/ar
  export RANLIB=/usr/bin/ranlib
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make prefix=/usr DESTDIR="${pkgdir}" LIBDIR="${pkgdir}"/lib RAISE_SETFCAP=no install
  rm "${pkgdir}"/lib/*.a
  chmod 755 "${pkgdir}"/lib/libcap.so.${pkgver}
}
