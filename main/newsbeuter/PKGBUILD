# Based upon the PKGBUILD from Arch Linux
pkgname=newsbeuter
pkgver=2.4
pkgrel=1
pkgdesc="A RSS feed reader for the text console with special Podcast support"
arch=('i686' 'x86_64')
url="http://www.newsbeuter.org/"
license=('custom: MIT')
depends=('curl' 'libxml2' 'sqlite' 'stfl')
makedepends=('gettext' 'curl' 'libxml2' 'sqlite' 'stfl' 'pkg-config')
options=('!libtool')
source=(http://www.newsbeuter.org/downloads/"${pkgname}"-"${pkgver}".tar.gz \
        "${pkgname}"-archlinux.patch)
sha256sums=('62dc8a3daf2f4c1ab6ec6997df0881146b6aa3fe3b29ef70cb644c258a7d0a9a'
            '5d76916159fd2b02eefb67e016f109edd0977df5274672685b7f8e0ec9668754')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  sed -i -e "s:-ggdb:${CXXFLAGS}:" Makefile
  patch -Np0 -i "${srcdir}"/"${pkgname}"-archlinux.patch
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make prefix=/usr DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}/usr/share/locale/"
  install -D -m644 LICENSE "${pkgdir}"/usr/share/licenses/newsbeuter/LICENSE
}
