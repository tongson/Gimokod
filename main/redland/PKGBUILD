# Based upon the PKGBUILD from Arch Linux
pkgname=redland
pkgver=1.0.14
pkgrel=1
url="http://librdf.org/"
license=("GPL")
arch=('i686' 'x86_64')
depends=('libtool' 'libxml2' 'openssl' 'rasqal' 'raptor')
makedepends=('rasqal' 'raptor')
options=('!libtool')
source=(http://download.librdf.org/source/${pkgname}-${pkgver}.tar.gz
        rpath.diff)
md5sums=('3400579d137da82c4175debf9f6d53ba'
         'acc85e784f01a656bd56777f95880787')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr \
              --build=${CBUILD} \
              --host=${CHOST} \
              --enable-release \
              --disable-static \
              --with-raptor=system \
              --with-rasqal=system \
              --with-xml-parser=libxml \
              --with-openssl-digests \
              --without-mysql \
              --without-postgresql \
              --without-sqlite \
              --without-bdb \
              --without-virtuoso \
              --without-unixodbc \
              --without-iodbc
  # nuke rpath
  patch -Np0 -i "${srcdir}"/rpath.diff

  make
}

package() {
  cd "${srcdir}"/${pkgbase}-${pkgver}
  make DESTDIR="${pkgdir}" install
  rm -rf "${pkgdir}"/usr/lib/redland
}




