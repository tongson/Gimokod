# Based upon the PKGBUILD from Arch Linux
pkgname=libmatroska
pkgver=1.3.0
pkgrel=1
pkgdesc="Matroska library"
arch=('i686' 'x86_64')
url="http://dl.matroska.org/downloads/libmatroska/"
license=('LGPL')
depends=('libebml')
source=("http://dl.matroska.org/downloads/${pkgname}/${pkgname}-${pkgver}.tar.bz2"
         libmatroska-1.0.0-respectflags.patch)
md5sums=('f4a8c411f09d39c754eb726efd616043'
         '75977adc62f352e0d52b0956ff0f0fce')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}/make/linux"
  Patch libmatroska-1.0.0-respectflags.patch
  make PREFIX=/usr \
       LIBEBML_INCLUDE_DIR=/usr/include/ebml \
       LIBEBML_LIB_DIR=/usr/lib \
       CXX=/usr/bin/gcc \
       AR=/usr/bin/ar sharedlib
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}/make/linux"
  make prefix="${pkgdir}/usr" install
}
