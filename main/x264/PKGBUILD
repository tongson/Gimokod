# Based upon the PKGBUILD from Arch Linux
pkgname=x264
pkgver=20110617
pkgrel=1
pkgdesc="free library for encoding H264/AVC video streams"
arch=('i686' 'x86_64')
url="http://www.videolan.org/developers/x264.html"
license=('GPL')
depends=
makedepends=('yasm')
source=(ftp://ftp.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-${pkgver}-2245.tar.bz2)
md5sums=('928717aa2f0c7ca91e589d6b60e688f1')

build() {
  cd "${srcdir}/${pkgname}-snapshot-${pkgver}-2245"

  ./configure --enable-shared \
              --disable-cli \
              --disable-avs \
              --disable-lavf \
              --disable-ffms \
              --disable-gpac

  make
}

package() {
  cd "${srcdir}/${pkgname}-snapshot-${pkgver}-2245"
  make DESTDIR="${pkgdir}" \
       bindir=/usr/bin \
       libdir=/usr/lib \
       includedir=/usr/include \
       install
}

